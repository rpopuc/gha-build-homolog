name: Manual

on:
  workflow_dispatch:  # Permite a ativação manual do workflow

concurrency:
  group: verify-concurrence

jobs:
  main:
    runs-on: ubuntu-latest

    steps:
      - name: Passo principal
        id: main
        run: |
          echo "error=Uma mensagem de erro" >> $GITHUB_OUTPUT
          exit 1

      - name: Relatório final
        if: failure()
        run: |
          echo "Ocorreram erros!"
          echo "- ${{ steps.main.outputs.error }}"

      # - name: Report
      #   if: failure()
      #   env:
      #     GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      #   run: |
      #     gh run view ${{ github.run_id }} --log | grep error